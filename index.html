<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>익명 칭찬 우체통</title>
    <!-- Google Fonts - 손글씨 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- html2canvas for image export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <h1>익명 칭찬 우체통</h1>
            <p class="subtitle">누가 보냈는지는 모르지만, 누군가 나를 응원하고 있어요</p>
        </header>

        <!-- 날아다니는 편지들 (Flying Letters) -->
        <div class="flying-letters-container" id="flyingLettersContainer">
            <div class="flying-letters-bg"></div>
            <div class="flying-letters-content" id="flyingLettersContent">
                <!-- JavaScript에서 동적으로 편지 추가 -->
            </div>
            <div class="flying-letters-overlay">
                <p class="flying-hint">✨ 따뜻한 칭찬들이 날아다니고 있어요</p>
            </div>
        </div>

        <!-- 내 우편함 버튼 -->
        <div class="my-mailbox-section">
            <button id="myMailboxBtn" class="my-mailbox-btn">
                <span class="mailbox-icon">📬</span>
                <span>내 우편함</span>
                <span id="myMessageCount" class="message-count">0</span>
            </button>
            <button id="currentUserBtn" class="current-user-btn">
                <span id="currentUserAvatar" class="current-user-avatar"></span>
                <span id="currentUserName" class="current-user-name"></span>
                <span class="change-user-hint">변경</span>
            </button>
        </div>

        <!-- 우편함 리스트 -->
        <main class="mailbox-grid" id="mailboxGrid">
            <!-- JavaScript에서 동적으로 추가 -->
        </main>
    </div>

    <!-- 메시지 작성 모달 -->
    <div id="writeModal" class="modal">
        <div class="modal-content modal-write">
            <button class="modal-close" id="closeWriteModal">&times;</button>
            <h2 class="modal-title">
                <span id="recipientName"></span>에게 메시지 보내기
            </h2>

            <!-- 칭찬 템플릿 -->
            <div class="option-section">
                <label class="option-label">빠른 문구 선택</label>
                <div class="template-options" id="templateOptions">
                    <button class="template-btn" data-template="항상 밝은 에너지 고마워요!">밝은 에너지</button>
                    <button class="template-btn" data-template="발표 정말 잘했어요!">발표 잘했어</button>
                    <button class="template-btn" data-template="같이 일해서 즐거워요!">같이 일해서</button>
                    <button class="template-btn" data-template="배려해줘서 감사해요!">배려 감사</button>
                    <button class="template-btn" data-template="앞으로도 파이팅!">파이팅!</button>
                    <button class="template-btn template-custom" id="customTemplateBtn">직접 입력</button>
                </div>
            </div>

            <!-- 메시지 입력 영역 (편지지 미리보기) -->
            <div class="paper-preview" id="paperPreview">
                <textarea
                    id="messageContent"
                    class="message-input"
                    placeholder="따뜻한 메시지를 남겨주세요..."
                    maxlength="200"
                ></textarea>
            </div>
            <div class="char-count"><span id="charCount">0</span>/200</div>

            <!-- 편지지 선택 -->
            <div class="option-section">
                <label class="option-label">편지지 선택</label>
                <div class="paper-options" id="paperOptions">
                    <button class="paper-btn selected" data-paper="flower" title="꽃무늬">
                        <span class="paper-icon">🌸</span>
                        <span class="paper-name">꽃</span>
                    </button>
                    <button class="paper-btn" data-paper="star" title="별무늬">
                        <span class="paper-icon">⭐</span>
                        <span class="paper-name">별</span>
                    </button>
                    <button class="paper-btn" data-paper="cloud" title="구름">
                        <span class="paper-icon">☁️</span>
                        <span class="paper-name">구름</span>
                    </button>
                    <button class="paper-btn" data-paper="heart" title="하트">
                        <span class="paper-icon">💕</span>
                        <span class="paper-name">하트</span>
                    </button>
                    <button class="paper-btn" data-paper="retro" title="레트로">
                        <span class="paper-icon">🎀</span>
                        <span class="paper-name">레트로</span>
                    </button>
                    <button class="paper-btn" data-paper="simple" title="심플">
                        <span class="paper-icon">📝</span>
                        <span class="paper-name">심플</span>
                    </button>
                </div>
            </div>

            <!-- 폰트 선택 -->
            <div class="option-section">
                <label class="option-label">폰트 선택</label>
                <div class="font-options" id="fontOptions">
                    <button class="font-btn selected" data-font="default">
                        <span class="font-preview font-default">기본</span>
                    </button>
                    <button class="font-btn" data-font="cute">
                        <span class="font-preview font-cute">귀여운</span>
                    </button>
                    <button class="font-btn" data-font="elegant">
                        <span class="font-preview font-elegant">정갈한</span>
                    </button>
                </div>
            </div>

            <!-- 스티커 선택 -->
            <div class="option-section">
                <label class="option-label">스티커 선택</label>
                <div class="sticker-options" id="stickerOptions">
                    <button class="sticker-btn selected" data-sticker="star">⭐</button>
                    <button class="sticker-btn" data-sticker="heart">💖</button>
                    <button class="sticker-btn" data-sticker="sparkle">✨</button>
                    <button class="sticker-btn" data-sticker="clap">👏</button>
                    <button class="sticker-btn" data-sticker="flower">🌸</button>
                    <button class="sticker-btn" data-sticker="rainbow">🌈</button>
                </div>
            </div>

            <button id="sendMessageBtn" class="send-btn">익명으로 보내기</button>
        </div>
    </div>

    <!-- 내 우편함 모달 -->
    <div id="inboxModal" class="modal">
        <div class="modal-content modal-large">
            <button class="modal-close" id="closeInboxModal">&times;</button>
            <h2 class="modal-title">📬 내 우편함</h2>
            <p id="inboxSubtitle" class="inbox-subtitle"></p>

            <div id="inboxGrid" class="inbox-grid">
                <!-- JavaScript에서 동적으로 추가 -->
            </div>

            <div id="emptyInbox" class="empty-inbox" style="display: none;">
                <span class="empty-icon">📭</span>
                <p>아직 받은 메시지가 없어요</p>
                <p class="empty-hint">조금만 기다려보세요!</p>
            </div>
        </div>
    </div>

    <!-- 메시지 상세 모달 -->
    <div id="messageDetailModal" class="modal">
        <div class="modal-content modal-small modal-detail-wrapper">
            <button class="modal-close" id="closeDetailModal">&times;</button>
            <div id="messageDetailCard" class="message-detail-card">
                <div id="messageDetail" class="message-detail">
                    <!-- JavaScript에서 동적으로 추가 -->
                </div>
            </div>
            <button id="saveImageBtn" class="save-image-btn">
                <span class="save-icon">📥</span>
                이미지로 저장하기
            </button>
        </div>
    </div>

    <!-- 환영 모달 (본인 선택) -->
    <div id="welcomeModal" class="modal">
        <div class="modal-content modal-welcome">
            <h2 class="welcome-title">👋 안녕하세요!</h2>
            <p class="welcome-subtitle">익명 칭찬 우체통에 오신 것을 환영해요<br>먼저 본인을 선택해주세요</p>

            <div id="welcomeGrid" class="welcome-grid">
                <!-- JavaScript에서 동적으로 추가 -->
            </div>
        </div>
    </div>

    <!-- 색종이 효과 Canvas -->
    <canvas id="confettiCanvas" class="confetti-canvas"></canvas>

    <!-- 토스트 메시지 -->
    <div id="toast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>
